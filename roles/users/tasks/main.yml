# Set Zsh as the default shell for sillypoise
- name: "Set Zsh as default shell for {{ host_user }}"
  ansible.builtin.user:
    name: "{{ host_user }}"
    shell: /bin/zsh
  become: true
  tags:
    - shell

- name: Ensure /bin/zsh symlink points to Nix Zsh binary
  ansible.builtin.file:
    src: "/home/{{ host_user }}/.nix-profile/bin/zsh"  # Adjust if the Nix-installed Zsh is in a different location
    dest: "/bin/zsh"
    state: link
  tags:
    - shell
    - environment
    - zsh
